#!/usr/bin/env sh

rofi_command="rofi -dmenu"

### Options ###
power_off="	Shutdown"
reboot="	Reboot"
rebootinto="	Reboot into..."
lock="	Lock"
suspend="⏾	Sleep"
logout="󰍃	Logout"

# Variable passed to rofi
options="$lock\n$logout\n$suspend\n$reboot\n$rebootinto\n$power_off"
choice=$(echo -e "$options" | $rofi_command )
choice="${choice#*	}"

case $choice in
    ${power_off#*	})
        systemctl poweroff
        ;;
    ${reboot#*	})
        systemctl reboot
        ;;
    ${rebootinto#*	})
        entry=$(systemctl reboot --boot-loader-entry=help | rofi -dmenu -i -p "Reboot into...")
        [[ -n "$entry" ]] && systemctl reboot --boot-loader-entry="$entry"
        ;;
    ${suspend#*	})
        $DOTFILES_BIN/zzz -f
        ;;
    ${logout#*	})
        if command -v swaymsg 2>&1 >/dev/null
        then
            swaymsg exit
        else
            kill -s TERM $(ps -o pid,cmd ax | awk '/dwm/{ if ($2 == "dwm") print $1 }')
        fi
        ;;
    ${lock#*	})
        zzz
        ;;
esac